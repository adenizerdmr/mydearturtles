<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>MyDearTurtles Word List V3</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f6f8fa;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 40px;
}

.top-right {
  position: fixed;
  top: 12px;
  right: 16px;
  text-align: center;
  font-weight: bold;
}

.top-right .badge {
  border: 2px solid #000;
  border-radius: 8px;
  padding: 6px 10px;
  font-size: 12px;
  background: white;
}

.top-right .class {
  font-size: 12px;
  color: black;
  margin-top: 4px;
}

h1 {
  font-size: 48px;
  margin-bottom: 20px;
}

.search {
  display: flex;
  gap: 10px;
  margin-bottom: 10px;
}

#filterInput {
  margin-bottom: 25px;
  width: 260px;
}

input {
  padding: 12px 16px;
  border-radius: 30px;
  border: 1px solid #ccc;
  width: 260px;
  font-size: 16px;
}

button {
  padding: 10px 16px;
  border-radius: 20px;
  border: none;
  cursor: pointer;
  font-size: 14px;
}

.card {
  background: white;
  border-radius: 16px;
  padding: 16px 20px;
  margin: 8px 0;
  width: 560px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.08);
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 10px;
}

.left {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.pos {
  color: #666;
  font-size: 13px;
}

.related {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

.tag {
  background: #eef1f4;
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 12px;
}

.actions {
  display: flex;
  gap: 6px;
}

.smallBtn {
  font-size: 12px;
  padding: 6px 10px;
}

.del { background:#ffe5e5; }
.edit { background:#e5f0ff; }
.meaning { font-size:12px; color:#444; }
</style>
</head>

<body>

<div class="top-right">
  <div class="badge">ODTÃœ</div>
  <div class="class">301 class</div>
</div>

<h1>MyDearTurtles</h1>

<div class="search">
  <input id="wordInput" placeholder="Enter a word">
  <button onclick="addWord()">Add</button>
</div>

<input id="filterInput" placeholder="Search in list..." oninput="render()">

<div id="list"></div>

<script>
// âœ… gerÃ§ek sÃ¶zlÃ¼k API
const API = "https://api.dictionaryapi.dev/api/v2/entries/en/";

const words = [];

function looksEnglish(w){
  return /^[a-zA-Z-]+$/.test(w);
}

async function fetchWordData(word){
  try{
    const res = await fetch(API + word);
    if(!res.ok) return null;
    const data = await res.json();

    const posSet = new Set();
    const synonymSet = new Set();
    let meaning = "";

    data.forEach(entry=>{
      entry.meanings.forEach(m=>{
        posSet.add(shortPOS(m.partOfSpeech));
        if(!meaning && m.definitions[0]) meaning = m.definitions[0].definition;
        (m.synonyms||[]).forEach(s=>synonymSet.add(s.toLowerCase()));
      });
    });

    return {
      pos:[...posSet],
      synonyms:[...synonymSet],
      meaning
    };

  }catch(e){
    return null;
  }
}

function shortPOS(p){
  if(p==="noun") return "n";
  if(p==="verb") return "v";
  if(p==="adjective") return "adj";
  if(p==="adverb") return "adv";
  return p;
}

async function addWord(){
  const input = document.getElementById("wordInput");
  const w = input.value.trim().toLowerCase();
  if(!w) return;
  if(!looksEnglish(w)){
    alert("Only English words allowed");
    return;
  }
  if(words.find(x=>x.word===w)) return;

  const data = await fetchWordData(w);
  if(!data){
    alert("Word not found in dictionary");
    return;
  }

  words.push({word:w,...data});
  input.value="";
  render();
}

function deleteWord(w){
  const i = words.findIndex(x=>x.word===w);
  if(i>-1) words.splice(i,1);
  render();
}

async function editWord(oldWord){
  const nw = prompt("Edit word:", oldWord);
  if(!nw) return;
  const clean = nw.trim().toLowerCase();
  if(!looksEnglish(clean)) return;

  const data = await fetchWordData(clean);
  if(!data){ alert("Word not found"); return; }

  const item = words.find(x=>x.word===oldWord);
  Object.assign(item,{word:clean,...data});
  render();
}

function getRelated(item){
  return item.synonyms.filter(s=>words.find(w=>w.word===s));
}

function render(){
  const list = document.getElementById("list");
  const filter = document.getElementById("filterInput").value.toLowerCase();
  list.innerHTML="";

  const sorted = [...words].sort((a,b)=>a.word.localeCompare(b.word));

  sorted
  .filter(item=>item.word.includes(filter))
  .forEach(item=>{

    const card=document.createElement("div");
    card.className="card";

    const left=document.createElement("div");
    left.className="left";

    left.innerHTML=`<div><b>${item.word}</b> <span class="pos">(${item.pos.join(",")})</span></div>`;

    if(item.meaning){
      const m=document.createElement("div");
      m.className="meaning";
      m.textContent=item.meaning;
      left.appendChild(m);
    }

    const relDiv=document.createElement("div");
    relDiv.className="related";

    getRelated(item).forEach(r=>{
      const t=document.createElement("span");
      t.className="tag";
      t.textContent=r;
      relDiv.appendChild(t);
    });

    left.appendChild(relDiv);

    const actions=document.createElement("div");
    actions.className="actions";

    const del=document.createElement("button");
    del.textContent="ðŸ—‘";
    del.className="smallBtn del";
    del.onclick=()=>deleteWord(item.word);

    const edit=document.createElement("button");
    edit.textContent="âœï¸";
    edit.className="smallBtn edit";
    edit.onclick=()=>editWord(item.word);

    actions.appendChild(edit);
    actions.appendChild(del);

    card.appendChild(left);
    card.appendChild(actions);
    list.appendChild(card);
  });
}
</script>

</body>
</html>
